!function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=2)}([function(t,i){function e(){return"serviceWorker"in navigator&&("https:"===window.location.protocol||"localhost"===window.location.hostname||0===window.location.hostname.indexOf("127."))}i.install=function(t){if(t||(t={}),e()){var i=navigator.serviceWorker.register("sw.js",{}),s=function(t){var i,e,s,h=t.installing||t.waiting;function a(){switch(h.state){case"redundant":n("onUpdateFailed"),h.onstatechange=null;break;case"installing":i||n("onUpdating");break;case"installed":e||n("onUpdateReady");break;case"activated":n("onUpdated"),h.onstatechange=null}}function r(){switch(h.state){case"redundant":h.onstatechange=null;break;case"installing":case"installed":break;case"activated":n("onInstalled"),h.onstatechange=null}}h&&!h.onstatechange&&(t.active?(a(),s=a):(r(),s=r),i=!0,t.waiting&&(e=!0),h.onstatechange=s)},n=function(i){"function"==typeof t[i]&&t[i]({source:"ServiceWorker"})};i.then(function(t){t&&(s(t),t.onupdatefound=function(){s(t)})}).catch(function(t){return n("onError"),Promise.reject(t)})}},i.applyUpdate=function(t,i){e()&&navigator.serviceWorker.getRegistration().then(function(e){e&&e.waiting?(e.waiting.postMessage({action:"skipWaiting"}),t&&t()):i&&i()})},i.update=function(){e()&&navigator.serviceWorker.getRegistration().then(function(t){if(t)return t.update()})}},function(t,i,e){},function(t,i,e){"use strict";e.r(i);e(1);var s=e(0);class n{constructor({x:t,y:i,width:e,height:s,canvas:n,ctx:h}){this.canvas=n,this.ctx=h,this.x=t,this.y=i,this.width=e,this.height=s}get centerX(){return this.x+this.width/2}get centerY(){return this.y+this.height/2}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get left(){return this.x}reset(){this.snapshot=null}clear(t){t||(t=this.snapshot),t&&(this.ctx.fillStyle="black",this.ctx.fillRect(t.x,t.y,t.width,t.height))}draw(){this.snapshot&&this.clear(this.snapshot),this.snapshot={x:this.x,y:this.y,width:this.width,height:this.height}}}class h extends n{constructor({color:t="white",backColor:i="black",border:e=!1,...s}){super(s),this.color=t,this.backColor=i,this.border=e}draw(t){super.draw(),this.clear(),this.border&&(this.ctx.strokeStyle="white",this.ctx.strokeRect(this.x+1,this.y+1,this.width-2,this.height-2)),this.ctx.fillStyle=this.color,this.ctx.font=`${.7*this.height|0}px sans-serif`,this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(t,this.x+this.width/2,this.y+this.height/2,this.width)}}class a{constructor({radius:t,x:i,y:e,canvas:s,ctx:n}){this.canvas=s,this.x=i,this.y=e,this.radius=t,this.ctx=n}get top(){return this.y-this.radius}get bottom(){return this.y+this.radius}get left(){return this.x-this.radius}get right(){return this.x+this.radius}reset(){this.snapshot=null}clear(t){t||(t=this.snapshot),t&&(this.ctx.fillStyle="black",this.ctx.fillRect(this.snapshot.x-this.radius,this.snapshot.y-this.radius,2*this.snapshot.radius,2*this.snapshot.radius))}draw(){this.snapshot&&this.clear(this.snapshot),this.snapshot={x:this.x,y:this.y,radius:this.radius}}}class r extends a{constructor({offset_y:t=10,...i}){super(i),this.offset_y=t,this.velocityX=null,this.velocityY=null,this.acceleration=null}resize(){this.x=parseInt(this.canvas.width/2,10),this.y=parseInt(this.canvas.height/2,10)}start(t=Math.sign(2*Math.random()-1)){this.resize(),this.velocityX=5*t,this.velocityY=parseInt(8*Math.random())-4,this.acceleration=7}stop(){this.x=null,this.y=null,this.velocityX=null,this.velocityY=null,this.acceleration=null}draw(){super.draw(),this.ctx.fillStyle="white",this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill()}}class c extends n{constructor({cpu:t,width:i=10,height:e=100,min_y:s=50,...n}){super(n),this.min_y=s,this.cpu=t,this.width=i,this.height=e,this.resize()}resize(){this.x=parseInt(this.cpu?this.canvas.width-2*this.width:this.width,10),this.y=parseInt((this.canvas.height-this.min_y)/2-this.height/2,10)}draw(){super.draw(),this.ctx.fillStyle="white",this.ctx.fillRect(this.x,this.y,this.width,this.height)}}class o extends n{constructor({offset_y:t=50,...i}){super(i),this.offset_y=t,this.resize()}resize(){this.x=this.canvas.width/2-this.width/2}draw(){this.ctx.save(),this.ctx.fillStyle="white",this.ctx.fillRect(0,this.offset_y-3,this.canvas.width,3),this.ctx.strokeStyle="white",this.ctx.setLineDash([5,5]),this.ctx.strokeRect(this.x,this.offset_y,this.width,this.canvas.height-this.offset_y),this.ctx.restore()}}const l=5,d=50,u=35,x=0;let w=null,y=null;const f={user:0,cpu:0},g={user:null,cpu:null};function p(t){f[t]+=1,g[t].draw(f[t])}let v=null,m=null,b=null,k=null,M=null,S=null,_=null,C=50;function I(){v=window.requestAnimationFrame(z),document.addEventListener("mousemove",R)}function R(t){const i=m.getBoundingClientRect();k.y=parseInt(t.clientY-i.top-k.height/2,10),k.y=Math.min(k.y,m.height-k.height),k.y=Math.max(k.y,C)}function z(){v=requestAnimationFrame(z),k.draw(),M.draw(),S.draw(),_.draw(),M.y+=parseInt(.1*(S.y-(M.y+M.height/2)),10),M.y=Math.min(M.y,M.canvas.height-M.height),M.y=Math.max(M.y,M.min_y),S.x+=parseInt(S.velocityX,10),S.y+=parseInt(S.velocityY,10),S.y-S.radius<C&&(S.y=Math.max(C+S.radius,S.y),S.velocityY*=-1),S.y>m.height-S.radius&&(S.y=Math.min(m.height-S.radius,S.y),S.velocityY*=-1);let t=null;if(S.right>M.left?t=M:S.left<k.right&&(t=k),t){const i=S.bottom>t.top&&S.top<t.bottom;if(i&&t===M&&(S.x=Math.min(M.left,S.right)-S.radius),i&&t===k&&(S.x=Math.max(k.right,S.left)+S.radius),i){const i=Math.PI/4*(S.y-(t.y+t.height/2))/(t.height/2);S.acceleration+=.5,S.velocityX=parseInt(-1*Math.sign(S.velocityX)*S.acceleration*Math.cos(i),10),S.velocityY=parseInt(S.acceleration*Math.sin(i),10)}}S.left>m.width&&(p("user"),S.start(-1)),S.right<0&&(p("cpu"),S.start(1))}class P extends n{constructor({canvas:t,action:i,text:e,border:s=!1,...n}){super(n),this.canvas=t,this.action=i,this.text=e,this.border=s,this.handleClick=this.handleClick.bind(this)}start(){this.canvas.addEventListener("click",this.handleClick)}stop(){this.canvas.removeEventListener("click",this.handleClick)}handleClick(t){const{x:i,y:e,height:s,width:n}=this,{offsetX:h,offsetY:a}=t;h>i&&h<n+i&&a>e&&a<s+e&&this.action()}draw(t){const{x:i,y:e,height:s,width:n}=this;this.border&&(this.ctx.strokeStyle="white",this.ctx.strokeRect(this.x+1,this.y+1,this.width-2,this.height-2)),this.ctx.fillStyle="black",this.ctx.fillRect(i,e,n,s),this.ctx.fillStyle="white",this.ctx.font=`${this.height}px sans-serif`,this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(t,this.x+this.width/2,this.y+this.height/2,this.width)}}const Y=200,j=200;let E=null,L=null,O=null,U=null;function X(t=!0){U="❚❚",L.draw(U),L.action=W,O.clear(),t&&I()}function W(){U="▶",L.draw(U),L.action=X,window.cancelAnimationFrame(v),document.removeEventListener("mousemove",R),O.draw("❚❚")}function A(t){27===t.keyCode&&L.action()}const B="1.0.0";s.install({onUpdateReady(){s.applyUpdate()},onUpdated(){window.location.reload()}});let F=null,T=null,$=null;function q(){F.width=window.innerWidth,F.height=window.innerHeight,T.fillStyle="black",T.fillRect(0,0,F.width,F.height),$.draw(`Pong v${B}`),L.x=E.width-30,O.x=E.width/2-Y/2,O.y=E.height/2-j/2,L.reset(),L.draw(U),g.cpu.x=w.width/2+l+5,g.cpu.reset(),g.cpu.draw(f.cpu),g.user.x=w.width/2-u-l-5,g.user.reset(),g.user.draw(f.user),k.reset(),k.resize(),k.draw(),M.reset(),M.resize(),M.draw(),S.reset(),S.resize(),S.draw(),_.reset(),_.resize(),_.draw()}document.addEventListener("DOMContentLoaded",()=>{F=document.getElementById("game"),T=F.getContext("2d"),$=new h({canvas:F,ctx:T,x:0,y:0,width:200,height:50}),function({canvas:t}){m=t,b=t.getContext("2d"),k=new c({canvas:m,ctx:b,width:10,height:100,cpu:!1}),M=new c({canvas:m,ctx:b,width:10,height:100,cpu:!0}),S=new r({canvas:m,ctx:b,x:m.width/2,y:m.height/2,radius:10}),_=new o({canvas:m,ctx:b,width:10}),S.start()}({canvas:F,ctx:T}),function({canvas:t}){y=(w=t).getContext("2d");const i=new h({ctx:y,y:x,width:u,height:d}),e=new h({ctx:y,y:x,width:u,height:d});g.user=i,g.cpu=e}({canvas:F,ctx:T}),function({canvas:t}){L=new P({canvas:E=t,ctx:E.getContext("2d"),y:10,height:20,width:20}),O=new h({canvas:E,ctx:E.getContext("2d"),border:!0,fontSize:"72pt",width:Y,height:j}),L.start(),document.addEventListener("keydown",A),X(!1)}({canvas:F,ctx:T}),q(),I(),X(!1),g.user.draw(f.user),g.cpu.draw(f.cpu),f.user=0,f.cpu=0,g.user.draw(f.user),g.cpu.draw(f.cpu)}),window.addEventListener("resize",()=>{q(),W()})}]);
//# sourceMappingURL=pong.7f71799972b13c1f6873.js.map